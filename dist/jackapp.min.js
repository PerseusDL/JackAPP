function tserv(a){return angular.element(document.body).injector().get(a)}var app=angular.module("app",["ngRoute","appCtrl","appUI","angularFileUpload","minicolors"]),appUI=angular.module("appUI",[]),appCtrl=angular.module("appCtrl",[]);app.config(["$routeProvider",function(a){a.when("/",{templateUrl:"html/explore.html",controller:"ExploreCtrl"})}]),appCtrl.controller("ExploreCtrl",["$scope",function(a){a.title="Explorer"}]),d3.custom={},d3.custom.barChart=function(){function a(a){a.each(function(a){var j=d-c.left-c.right,k=e-c.top-c.bottom,l=d3.scale.ordinal().domain(a.map(function(a,b){return b})).rangeRoundBands([0,j],.1),m=d3.scale.linear().domain([0,d3.max(a,function(a){return a})]).range([k,0]),n=d3.svg.axis().scale(l).orient("bottom"),o=d3.svg.axis().scale(m).orient("left"),p=j/a.length;if(!b){b=d3.select(this).append("svg").classed("chart",!0);var q=b.append("g").classed("container-group",!0);q.append("g").classed("chart-group",!0),q.append("g").classed("x-axis-group axis",!0),q.append("g").classed("y-axis-group axis")}b.transition().duration(h).attr({width:d,height:e}),b.select(".container-group").attr({transform:"translate("+c.left+","+c.top+")"}),b.select(".x-axis-group.axis").transition().duration(h).ease(g).attr({transform:"translate(0,"+k+")"}).call(n),b.select(".y-axis-group.axis").transition().duration(h).ease(g).call(o);var r=l.rangeBand()/100*f,p=l.rangeBand()-r,s=b.select(".chart-group").selectAll(".bar").data(a);s.enter().append("rect").classed("bar",!0).attr({x:j,width:p,y:function(a){return m(a)},height:function(a){return k-m(a)}}).on("click",function(a){console.log(a)}).on("mouseover",i.customHover),s.transition().duration(h).ease(g).attr({width:p,x:function(a,b){return l(b)+r/2},y:function(a){return m(a)},height:function(a){return k-m(a)}}),s.exit().transition().style({opacity:0}).remove(),h=500})}var b,c={top:20,right:20,bottom:40,left:40},d=500,e=500,f=0,g="cubic-in-out",h=500,i=d3.dispatch("customHover");return a.width=function(a){return arguments.length?(d=parseInt(a),this):d},a.height=function(a){return arguments.length?(e=parseInt(a),h=0,this):e},a.gap=function(a){return arguments.length?(f=a,this):f},a.ease=function(a){return arguments.length?(g=a,this):g},d3.rebind(a,i,"on"),a},appUI.directive("barChart",function(){var a=d3.custom.barChart();return{restrict:"E",replace:!0,template:'<div class="chart"></div>',controller:function(b,c){function d(){return d3.range(~~(50*Math.random())+1).map(function(){return~~(1e3*Math.random())})}b.height=200,b.data=d(),console.log(b.data);var e=d3.select(c[0]);e.datum(d).call(a),e.call(a.height(b.height))}}}),appUI.directive("chartForm",function(){return{restrict:"E",replace:!0,controller:function(a){function b(){return d3.range(~~(50*Math.random())+1).map(function(){return~~(1e3*Math.random())})}a.update=function(){a.data=b()}},template:'<div class="form">Height: {{ options.height }}<br /><input type="range" ng-model="options.height" min="100" max="800"/><br /><button ng-click="update()">Update Data</button><br />Hovered bar data: {{barValue}}</div>'}}),$(document).foundation(),appUI.directive("imageGrid",function(){return{restrict:"E",replace:!0,controller:function(a,b){b.get("json/src/vortex.json").success(function(b){a.data=b})},templateUrl:"ui/image-grid.ui.html"}});